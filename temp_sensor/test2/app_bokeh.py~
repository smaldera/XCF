from flask import Flask, render_template
from bokeh.plotting import figure
from bokeh.embed import components
from bokeh.resources import CDN
import numpy as np
import random 
app = Flask(__name__)

@app.route('/', methods=['GET', 'POST'])
def index():
    # Generate sample data
    np.random.seed(42)
    x = np.random.rand(100)
    y = np.random.rand(100)

    # Create a Bokeh scatter plot
    plot = figure(title='Random Scatter Plot', tools='pan,box_zoom,reset', width=400, height=400)
    #plot.circle(x, y, size=7, color='blue', alpha=0.6)
    plot.circle( 
        [i for i in range(10)], 
        [random.randint(1, 50) for j in range(10)], 
        size=20, 
        color="navy", 
        alpha=0.5
    ) 
    # Embed the plot components
    script, div = components(plot)
    print("Pippo!!")

    # Render the HTML template with the Bokeh plot components
    return render_template( template_name_or_list='index_bokeh2.html', script=[script], div=[div],resources=CDN.render())

if __name__ == '__main__':
   # app.run(debug=True)
    app.run()
